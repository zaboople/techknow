# SPECIAL COMMANDS

## Figure out what versions of plugins we are using
mvn help:effective-pom

## Find out where local maven repo is
mvn help:evaluate -Dexpression=settings.localRepository

## Cough up dependency tree:
mvn dependency:tree

## Clean up the f***ing mess when things are f***ed:
mvn dependency:purge-local-repository

## Maven build up to a war but skip the war part:
mvn prepare-package war:exploded


# SPECIAL COMMAND-LINE FLAGS:

## Build offline and stop trying to redownload dependencies
mvn -o

## Force updates when building, kinda makes it want to refresh the local repo, helps sometimes:
mvn -U

## Alternate settings file:
-gs foo.xml

## De-colorize and remove escape codes from output:
mvn --batch-mode


# SPECIAL ENVIRONMENT VARIABLES:

## Maven dumps trash into cygwin et al:
export TERM=cygwin

## Add memory help and so forth:
export MAVEN_OPTS="-Xms256m -Xmx512m"


# TESTS

##Compile tests:
test-compile

## Skip tests:
-Dmaven.test.skip=true
### Example:
mvn -Dmaven.test.skip=true install

##Run one test:
mvn test -Dtest=classname
mvn test -Dtest=classname#function

## Integration tests
### These are done mostly by creating files named "****IT.java", emphasis on the "IT".
### So "mvn test" will run *all* tests, but you can skip the integration tests with
mvn -DskipITs
### You can also run ONLY the integration tests with:
mvn failsafe:integration-test
### Or use both at once to get nothing (ha, ha...)


# SPECIAL BUILD CONFIGURATIONS

## Allow jar files for distribution to be added:
  # Add this to pom.xml, and then 'mvn install' will put jar files in target/JARS
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
      <execution>
        <id>copy-dependencies</id>
        <phase>initialize</phase>
        <goals>
          <goal>copy-dependencies</goal>
        </goals>
        <configuration>
          <outputDirectory>${project.build.directory}/JARS</outputDirectory>
        </configuration>
      </execution>
    </executions>
  </plugin>


## Shade plugin for uberjar:
<project>
    <build>
        <plugins>
            ....
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>3.2.0</version>
                <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                    <goal>shade</goal>
                    </goals>
                    <configuration>
                    <transformers>
                        <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                        <mainClass>com.siemens.Boot</mainClass>
                        </transformer>
                    </transformers>
                    </configuration>
                </execution>
                </executions>
            </plugin>
            ....
        </plugins>
    </build>
</project>
